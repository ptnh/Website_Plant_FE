{"ast":null,"code":"import _slicedToArray from\"E:/TTTN/website_plant/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{readApiAccount}from\"../../Api\";import\"./login.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),idFlag=_useState6[0],setIdFlag=_useState6[1];var navigate=useNavigate();var handleSubmit=function handleSubmit(e){e.preventDefault();fetch(readApiAccount).then(function(response){return response.json();}).then(function(accounts){var account=accounts.find(function(acc){return acc.username_account===username;});if(account&&account.password_account===password&&account.permission==='USER'){setIdFlag(account.id_account);onLogin(username,account.id_account);navigate('/');}else if(account.password_account!=password){alert('Thông tin đăng nhập không chính xác');}else if(account.permission!='USER'){alert('Quyền hạn không không được phép đăng nhập');}}).catch(function(error){return console.error('Error fetching accounts:',error);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"box_login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_login\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"logo.jpg\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{class:\"inputBox\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{class:\"inputBox\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-logins\",type:\"submit\",children:\"\\u0110\\u0103ng nh\\u1EADp\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-dangky\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"\\u0110\\u0103ng k\\xFD\"})})]})})});}export default Login;","map":{"version":3,"names":["useState","useEffect","Link","useNavigate","readApiAccount","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","onLogin","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","idFlag","setIdFlag","navigate","handleSubmit","e","preventDefault","fetch","then","response","json","accounts","account","find","acc","username_account","password_account","permission","id_account","alert","catch","error","console","children","class","className","src","onSubmit","type","id","value","onChange","target","href"],"sources":["E:/TTTN/website_plant/src/pages/login/Login.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { readApiAccount } from '~/Api';\r\nimport './login.scss';\r\nfunction Login({ onLogin }) {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [idFlag, setIdFlag] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        fetch(readApiAccount)\r\n        .then(response => response.json())\r\n        .then(accounts => {\r\n            const account = accounts.find(acc => acc.username_account === username);\r\n            if (account && account.password_account === password && account.permission === 'USER') {\r\n                setIdFlag(account.id_account);\r\n                onLogin(username, account.id_account);\r\n                navigate('/');\r\n              } else if (account.password_account != password) {\r\n                alert('Thông tin đăng nhập không chính xác');\r\n            } else if (account.permission != 'USER'){\r\n                alert('Quyền hạn không không được phép đăng nhập');\r\n            }\r\n        })\r\n        .catch(error => console.error('Error fetching accounts:', error));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div class=\"box_login\">\r\n                <div className=\"form_login\">\r\n                    <img src=\"logo.jpg\"></img>\r\n                    <h2>Đăng nhập</h2>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div class=\"inputBox\">\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"username\"\r\n                                value={username}\r\n                                onChange={(e) => setUsername(e.target.value)}\r\n                            />\r\n                        </div>\r\n                        <div class=\"inputBox\">\r\n                            <input\r\n                                type=\"password\"\r\n                                id=\"password\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                            />\r\n                        </div>\r\n                        <button className=\"btn-logins\" type=\"submit\">\r\n                            Đăng nhập\r\n                        </button>\r\n                    </form>\r\n                    <button className=\"btn-dangky\">\r\n                        <a href=\"/register\">Đăng ký</a>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}